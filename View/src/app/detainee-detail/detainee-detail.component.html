<form method="post">
    <div class="row" id="float-left">
        <img style="width:600px; height:450px" *ngIf="url" id="img" class="image-holder" [src]=url> 
        <br>
        <label *ngIf="change" class="file btn btn-lg btn-primary" style="width: 600px">
        <input type="file" #Image accept="image/*" (change)="handleFileInput($event.target.files)"/>
        Изменить фото                 
        </label>
    </div>
    <div class="row">          
        <div class="col-md-8">
            <div *appIsGranted="'UPDATE'">
                <button type="button" *ngIf="(router.url.substring(0, 19) == '/home/add-detention')" (click)="sendDetaineeToDetention()" class="btn btn-primary">Добавить к задержанию</button>
                &nbsp; 
                <button type="button" *ngIf="!(router.url.substring(0, 19) == '/home/add-detention') && !change" (click)="change = !change" class="btn btn-primary">Изменить информацию о задержанном</button>
                &nbsp; 
                <button type="button"  *ngIf="!(router.url.substring(0, 19) == '/home/add-detention') && !change" (click)="deleteCurrentDetainee()" class="btn btn-primary">Удалить задержанного</button>  
                <button type="button" *ngIf="change" (click)="saveChanges()" class="btn btn-primary">Сохранить изменения</button> 
                &nbsp;      
                <button type="button" *ngIf="change" (click)="change = !change" class="btn btn-primary">Отмена</button>               
                &nbsp;  
            </div>                    
            <br>
            <br>          
            <div *ngIf="!change" class="tab-content profile-tab" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">                    
                    <div class="row">
                        <div class="col-md-6">
                            <label>Номер задержанного</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.detaineeID}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Имя</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.firstName}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Фамилия</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.lastName}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Отчество</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.patronymic}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Дата рождения | Возраст</label>
                        </div>
                        <div class="col-md-6">
                            <p *ngIf="detainee.birthDate">{{detainee.birthDate | date:'dd-MM-yyyy'}} | {{age}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Место работы</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.job}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Телефоны</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.mobilePhoneNumber}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Дополнительная информация</label>
                        </div>
                        <div class="col-md-6">
                            <p>{{detainee.extraInfo}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Адрес прописки</label>
                        </div>
                        <div class="col-md-6">
                              <p>{{detainee.residencePlace}}</p>
                        </div>
                    </div>                
                </div>      
            </div>
            <div *ngIf="change" class="tab-content profile-tab" id="myTabContent">
                  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">                    
                        <div class="row">
                            <div class="col-md-6">
                                <label>Номер задержанного</label>
                            </div>
                            <div class="col-md-6">
                                <p>{{detainee.detaineeID}}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Имя</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.firstName" class="form-control" name="firstName"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Фамилия</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.lastName" class="form-control" name="lastName"/>                                  
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Отчество</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.patronymic" class="form-control" name="patronymic"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Дата рождения | Возраст</label>
                            </div>
                            <div class="col-md-6">
                                <input type="date" [ngModel] ="detainee.birthDate | date:'yyyy-MM-dd'" (ngModelChange)="detainee.birthDate = $event" class="form-control" name="birthDate"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Место работы</label>
                            </div>
                             <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.job" class="form-control" name="job"/>                             
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Телефоны</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.mobilePhoneNumber" class="form-control" name="mobilePhoneNumber"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Дополнительная информация</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.extraInfo" class="form-control" name="extraInfo"/>                                 
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Адрес прописки</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="detainee.residencePlace" class="form-control" name="residencePlace"/>                               
                            </div>
                        </div>                
                    </div>      
                </div>
            </div>
        </div>
    </form> 
    <br>    
    <div>
        <h2>Задержания</h2>
        <div>
            <table form id="child-table" class="table table-bordered table-sm" style="height: 100px; width: 100%">
                <thead>
                    <tr > 
                        <td>Номер задержания</td>
                        <td>Дата задержания</td>    
                        <td>Фамилия инициалы лица ответственного за задержание</td>
                        <td>Должность</td>
                        <td>Звание</td>                   
                    </tr>
                </thead>
                <tbody>
                    <tr  *ngFor="let d of smartDetentions" (dblclick)="getDetention(d)">            
                        <td>{{d?.detentionID}}</td>
                        <td>{{d?.detentionDate}}</td>         
                        <td>{{d?.employeeFullName}}</td>
                        <td>{{d?.deliveryStatus}}</td>  
                        <td>{{d?.releaseStatus}}</td>        
                    </tr>
                </tbody>
            </table>
            </div>
        <div class="twins">
            <h2>Доставка задержанного</h2>
            <app-delivery *ngIf="smartDetention" [detaineeID]="detainee.detaineeID" [detentionID]="smartDetention.detentionID"></app-delivery>
        </div>
        
        <div class="twins">
            <h2>Освобождение задержанного</h2>
            <app-release *ngIf="smartDetention" [detaineeID]="detainee.detaineeID" [detentionID]="smartDetention.detentionID"></app-release>
        </div>
  </div>       
